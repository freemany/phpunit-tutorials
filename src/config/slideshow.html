export default [` <!-- page 1 -->
<p>We will have a new object Logger which is the injectable dependency of Person</p>
<pre><code class="php">
namespace App;

class Logger
{
    public function log(string $message): bool
    {
        error_log($message);

        return true;
    }
}
</code></pre>
`,


` <!-- page 2 -->
<p>We can inject the Logger into Person in the constructor:</p>
<pre><code>
class Person extends Thing implements ActionInterface
{
    /** @var int */
    protected $maxStrength;
    /** @var Logger */
    protected $logger;

    public function __construct(string $name, $options = [])
    {
        parent::__construct($name, $options);
        $this->maxStrength = $options['maxStrength'] ?? $options['maxStrength'];
        $this->logger = $options['logger'] ?? $options['logger'];
    }
// ..
</code></pre>
`,


` <!-- page 3 -->
<p>But demo purpose, we choose another way to inject with getter/setter pattern.</p>
<pre><code class="php">
    /**
     * @return Logger
     */
    protected function getLogger(): Logger
    {
        if (null === $this->logger) {
            $this->logger = new Logger();
        }
        return $this->logger;
    }
</code></pre>
<p>Accordingly we will have a setter in the PersonMock if we don't have setter in Person</p>
<pre><code class="php">
class PersonMock extends Person
{
    public function setLogger(Logger $logger)
    {
        $this->logger = $logger;

        return $this;
    }
}
</code></pre>
`,


` <!-- page 4 -->
<p>Logger is dependency and we presume it has been tested previously. So what we need here for Person is to test if the Logger::log
gets called expected</p>
<p>Here are the tests in PersonTest:</p>
<pre><code class="php">
    /**
     * @group logger
     * @group person
     */
    public function testLoggerIsCalled()
    {
        $logger = $this->getMockBuilder(Logger::class)
                       ->disableOriginalConstructor()
                       ->getMock();

        $logger->expects($this->once())->method('log'); // assert if it is called once

        $cart = $this->getMockBuilder(Cart::class)
                     ->disableOriginalConstructor()
                     ->getMock();

        $cart->method('getWeight')->willReturn(1);

        $person = new PersonMock('foo', ['maxStrength' => 2]);
        $person->setLogger($logger);
        $person->push($cart);
    }
</code></pre>
<p>If the cart is not moving, it should not be called.</p>
<pre><code class="php">
    /**
     * @group logger
     * @group person
     */
    public function testLoggerIsNotCalled()
    {
        $logger = $this->getMockBuilder(Logger::class)
                       ->disableOriginalConstructor()
                       ->getMock();
        $logger->expects($this->never())   // Never called
               ->method('log');

        $cart = $this->getMockBuilder(Cart::class)
                     ->disableOriginalConstructor()
                     ->getMock();

        $cart->method('getWeight')->willReturn(2);

        $person = new PersonMock('foo', ['maxStrength' => 1]);
        $person->setLogger($logger);
        $person->push($cart);
    }
</code></pre>
`,
`<!-- page 5 -->
<p>For demo purpose, we test with PersonMock instead of mock builder and data provider</p>
<pre><code class="php">
  /**
     * @group        logger
     * @group        person
     * @dataProvider loggerDataProvider
     *
     * @param int    $weight
     * @param int    $maxStrength
     * @param string $expected
     */
    public function testLoggerIsCalledWithMock(int $weight, int $maxStrength, string $expected)
    {
        $logger = $this->getMockBuilder(Logger::class)
                       ->disableOriginalConstructor()
                       ->getMock();
        switch ($expected) {
            case 'once':
                $logger->expects($this->once())->method('log'); // Once
                break;
            case 'never':
            default:
                $logger->expects($this->never())->method('log'); // Never
                break;
        }

        $cart = new CartMock('foo', ['weight' => $weight]);
        $cart->setResult('dummy_result');
        $person = new PersonMock('bar', ['maxStrength' => $maxStrength]);
        $person->setLogger($logger);
        $person->push($cart);
    }

    /**
     * @return array
     */
    public function loggerDataProvider(): array
    {
        return [
            [1, 2, 'once'],
            [2, 1, 'never'],
        ];
    }
</code></pre>
`,

` <!-- page 6 -->
<p>Run all tests grouped by logger:</p>
<pre><code class="bash">
$ vendor/bin/phpunit --group logger
PHPUnit 7.5.7 by Sebastian Bergmann and contributors.

....                                                                4 / 4 (100%)

Time: 29 ms, Memory: 4.00 MB
<span class="bg-green">OK (4 tests, 4 assertions)</span>
</code></pre>
<h3 class="text-primary">Horay !!! More tutorial about PhpUnit ideas are coming ...</h3>
<h3 class="text-primary">To be continued... </h3>
<p>If you have something for sharing, you can create your onw tutorials with this template.
Just simply git-checkout to create-your-own-tutorial and follow the instruction. Have fun !!!</p>
<pre><code class="bash">
$ git checkout create-your-own-tutorial
</code></pre>
`];